{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState } from 'react';\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { useHeaderHeight } from '@react-navigation/stack';\nimport colors from \"../misc/colors\";\nimport RoundIconBtn from \"./RoundIconBtn\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useNotes } from \"../contexts/NoteProvider\";\nimport NoteInputModal from \"./NoteInputModal\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar formatDate = function formatDate(ms) {\n  var date = new Date(ms);\n  var day = date.getDate();\n  var month = date.getMonth() + 1;\n  var year = date.getFullYear();\n  var hrs = date.getHours();\n  var min = date.getMinutes();\n  var sec = date.getSeconds();\n  return day + \"/\" + month + \"/\" + year + \" - \" + hrs + \":\" + min + \":\" + sec;\n};\nvar NoteDetail = function NoteDetail(props) {\n  var _useState = useState(props.route.params.note),\n    _useState2 = _slicedToArray(_useState, 2),\n    note = _useState2[0],\n    setNote = _useState2[1];\n  var headerHeight = useHeaderHeight();\n  var _useNotes = useNotes(),\n    setNotes = _useNotes.setNotes;\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    showModal = _useState4[0],\n    setShowModal = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isEdit = _useState6[0],\n    setIsEdit = _useState6[1];\n  var deleteNote = function _callee() {\n    var result, notes, newNotes;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(AsyncStorage.getItem('notes'));\n        case 2:\n          result = _context.sent;\n          notes = [];\n          if (result !== null) notes = JSON.parse(result);\n          newNotes = notes.filter(function (n) {\n            return n.id !== note.id;\n          });\n          setNotes(newNotes);\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('notes', JSON.stringify(newNotes)));\n        case 9:\n          props.navigation.goBack();\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }, null, null, null, Promise);\n  };\n  var displayDeleteAlert = function displayDeleteAlert() {\n    Alert.alert('Are You Sure!', 'This action will delete your note permanently!', [{\n      text: 'Delete',\n      onPress: deleteNote\n    }, {\n      text: 'No Thanks',\n      onPress: function onPress() {\n        return console.log('no thanks');\n      }\n    }], {\n      cancelable: true\n    });\n  };\n  var handleUpdate = function _callee2(title, desc, time) {\n    var result, notes, newNotes;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return _regeneratorRuntime.awrap(AsyncStorage.getItem('notes'));\n        case 2:\n          result = _context2.sent;\n          notes = [];\n          if (result !== null) notes = JSON.parse(result);\n          newNotes = notes.filter(function (n) {\n            if (n.id === note.id) {\n              n.title = title;\n              n.desc = desc;\n              n.isUpdated = true;\n              n.time = time;\n              setNote(n);\n            }\n            return n;\n          });\n          setNotes(newNotes);\n          _context2.next = 9;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('notes', JSON.stringify(newNotes)));\n        case 9:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, null, null, null, Promise);\n  };\n  var handleOnClose = function handleOnClose() {\n    return setShowModal(false);\n  };\n  var openEditModal = function openEditModal() {\n    setIsEdit(true);\n    setShowModal(true);\n  };\n  return _jsxs(_Fragment, {\n    children: [_jsxs(ScrollView, {\n      contentContainerStyle: [styles.container, {\n        paddingTop: headerHeight\n      }],\n      children: [_jsx(Text, {\n        style: styles.time,\n        children: note.isUpdated ? \"Updated At \" + formatDate(note.time) : \"Created At \" + formatDate(note.time)\n      }), _jsx(Text, {\n        style: styles.title,\n        children: note.title\n      }), _jsx(Text, {\n        style: styles.desc,\n        children: note.desc\n      })]\n    }), _jsxs(View, {\n      style: styles.btnContainer,\n      children: [_jsx(RoundIconBtn, {\n        antIconName: \"delete\",\n        style: {\n          backgroundColor: colors.ERROR,\n          marginBottom: 15\n        },\n        onPress: displayDeleteAlert\n      }), _jsx(RoundIconBtn, {\n        antIconName: \"edit\",\n        onPress: openEditModal\n      })]\n    }), _jsx(NoteInputModal, {\n      isEdit: isEdit,\n      note: note,\n      onClose: handleOnClose,\n      onSubmit: handleUpdate,\n      visible: showModal\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    paddingHorizontal: 15\n  },\n  title: {\n    fontSize: 30,\n    color: colors.PRIMARY,\n    fontWeight: 'bold'\n  },\n  desc: {\n    fontSize: 20,\n    opacity: 0.6\n  },\n  time: {\n    textAlign: 'right',\n    fontSize: 12,\n    opacity: 0.5\n  },\n  btnContainer: {\n    position: 'absolute',\n    right: 15,\n    bottom: 50\n  }\n});\nexport default NoteDetail;","map":{"version":3,"names":["React","useState","useHeaderHeight","colors","RoundIconBtn","AsyncStorage","useNotes","NoteInputModal","formatDate","ms","date","Date","day","getDate","month","getMonth","year","getFullYear","hrs","getHours","min","getMinutes","sec","getSeconds","NoteDetail","props","route","params","note","setNote","headerHeight","setNotes","showModal","setShowModal","isEdit","setIsEdit","deleteNote","getItem","result","notes","JSON","parse","newNotes","filter","n","id","setItem","stringify","navigation","goBack","displayDeleteAlert","Alert","alert","text","onPress","console","log","cancelable","handleUpdate","title","desc","time","isUpdated","handleOnClose","openEditModal","styles","container","paddingTop","btnContainer","backgroundColor","ERROR","marginBottom","StyleSheet","create","paddingHorizontal","fontSize","color","PRIMARY","fontWeight","opacity","textAlign","position","right","bottom"],"sources":["/Users/leduy/Workspace/Note-App-last-commit/CS526-CK-git/app/components/NoteDetail.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { ScrollView, StyleSheet, Text, View, Alert } from 'react-native';\nimport { useHeaderHeight } from '@react-navigation/stack';\nimport colors from '../misc/colors';\nimport RoundIconBtn from './RoundIconBtn';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useNotes } from '../contexts/NoteProvider';\nimport NoteInputModal from './NoteInputModal';\n\nconst formatDate = ms => {\n  const date = new Date(ms);\n  const day = date.getDate();\n  const month = date.getMonth() + 1;\n  const year = date.getFullYear();\n  const hrs = date.getHours();\n  const min = date.getMinutes();\n  const sec = date.getSeconds();\n\n  return `${day}/${month}/${year} - ${hrs}:${min}:${sec}`;\n};\n\nconst NoteDetail = props => {\n  const [note, setNote] = useState(props.route.params.note);\n  const headerHeight = useHeaderHeight();\n  const { setNotes } = useNotes();\n  const [showModal, setShowModal] = useState(false);\n  const [isEdit, setIsEdit] = useState(false);\n\n  const deleteNote = async () => {\n    const result = await AsyncStorage.getItem('notes');\n    let notes = [];\n    if (result !== null) notes = JSON.parse(result);\n\n    const newNotes = notes.filter(n => n.id !== note.id);\n    setNotes(newNotes);\n    await AsyncStorage.setItem('notes', JSON.stringify(newNotes));\n    props.navigation.goBack();\n  };\n\n  const displayDeleteAlert = () => {\n    Alert.alert(\n      'Are You Sure!',\n      'This action will delete your note permanently!',\n      [\n        {\n          text: 'Delete',\n          onPress: deleteNote,\n        },\n        {\n          text: 'No Thanks',\n          onPress: () => console.log('no thanks'),\n        },\n      ],\n      {\n        cancelable: true,\n      }\n    );\n  };\n\n  const handleUpdate = async (title, desc, time) => {\n    const result = await AsyncStorage.getItem('notes');\n    let notes = [];\n    if (result !== null) notes = JSON.parse(result);\n\n    const newNotes = notes.filter(n => {\n      if (n.id === note.id) {\n        n.title = title;\n        n.desc = desc;\n        n.isUpdated = true;\n        n.time = time;\n\n        setNote(n);\n      }\n      return n;\n    });\n\n    setNotes(newNotes);\n    await AsyncStorage.setItem('notes', JSON.stringify(newNotes));\n  };\n  const handleOnClose = () => setShowModal(false);\n\n  const openEditModal = () => {\n    setIsEdit(true);\n    setShowModal(true);\n  };\n\n  return (\n    <>\n      <ScrollView\n        contentContainerStyle={[styles.container, { paddingTop: headerHeight }]}\n      >\n        <Text style={styles.time}>\n          {note.isUpdated\n            ? `Updated At ${formatDate(note.time)}`\n            : `Created At ${formatDate(note.time)}`}\n        </Text>\n        <Text style={styles.title}>{note.title}</Text>\n        <Text style={styles.desc}>{note.desc}</Text>\n      </ScrollView>\n      <View style={styles.btnContainer}>\n        <RoundIconBtn\n          antIconName='delete'\n          style={{ backgroundColor: colors.ERROR, marginBottom: 15 }}\n          onPress={displayDeleteAlert}\n        />\n        <RoundIconBtn antIconName='edit' onPress={openEditModal} />\n      </View>\n      <NoteInputModal\n        isEdit={isEdit}\n        note={note}\n        onClose={handleOnClose}\n        onSubmit={handleUpdate}\n        visible={showModal}\n      />\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    // flex: 1,\n    paddingHorizontal: 15,\n  },\n  title: {\n    fontSize: 30,\n    color: colors.PRIMARY,\n    fontWeight: 'bold',\n  },\n  desc: {\n    fontSize: 20,\n    opacity: 0.6,\n  },\n  time: {\n    textAlign: 'right',\n    fontSize: 12,\n    opacity: 0.5,\n  },\n  btnContainer: {\n    position: 'absolute',\n    right: 15,\n    bottom: 50,\n  },\n});\n\nexport default NoteDetail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}